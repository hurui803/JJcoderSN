# linux 文件比对

------

# [#](http://www.liuwq.com/views/linux基础/linux文件比对.html#linux文件比对)linux文件比对

## [#](http://www.liuwq.com/views/linux基础/linux文件比对.html#一、文本文件比较)一、文本文件比较

### [#](http://www.liuwq.com/views/linux基础/linux文件比对.html#_1、如果想对两个有序的文件进行比较，可以使用comm命令)1、如果想对两个有序的文件进行比较，可以使用comm命令

```shell
语法：comm [- 123 ] file1 file2
说明：该命令是对两个已经排好序的文件进行比较。其中file1和file2是已排序的文件。comm读取这两个文件，然后生成
三列输出：仅在file1中出现的行；仅在file2中出现的行；在两个文件中都存在的行。如果文件名用“- ”，则表示从标准输入读取。
选项1、2或3抑制相应的列显示。例如
comm - 12就只显示在两个文件中都存在的行；
comm - 23只显示在第一个文件中出现而未在第二个文件中出现的行；
comm - 123则什么也不显示。
```

------

### [#](http://www.liuwq.com/views/linux基础/linux文件比对.html#_2、如果文本文件没有排序，可以使用diff命令)2、如果文本文件没有排序，可以使用Diff命令

```yml
该命令的功能为逐行比较两个文本文件，列出其不同之处。它比comm命令完成更复杂的检查。它对给出的文件进行系统的
检查，并显示出两个文件中所有不同的行，不要求事先对文件进行排序。
语法：diff [选项] file1 file2
说明：该命令告诉用户，为了使两个文件file1和file2一致，需要修改它们的哪些行。如果用“- ”表示file1或fiie2，
则表示标准输入。如果file1或file2是目录，那么diff将使用该目录中的同名文件进行比较。例如：
diff /usr/xu mine
把目录/usr/xu 中名为mine的文件与当前目录中的mine文件进行比较。
通常输出由下述形式的行组成：
n1 a n3，n4
n1，n2 d n3
n1，n2 c n3，n4
这些行类似ed命令把filel转换成file2。字母（a、d和c）之前的行号（n1，n2）是针对file1的，其后面的行号（n3，n4）
是针对file2的。字母a、d和c分别表示附加、删除和修改操作。
在上述形式的每一行的后面跟随受到影响的若干行，以“＜”打头的行属于第一个文件，以“＞”打头的行属于第二个文件。
diff能区别块和字符设备文件以及FIFO（管道文件），不会把它们与普通文件进行比较。
如果file1和file2都是目录，则diff会产生很多信息。如果一个目录中只有一个文件，则产生一条信息，指出该目录路径名和其中的文件名。
diff各选项的含义如下：
- b 忽略行尾的空格，而字符串中的一个或多个空格符都视为相等。如How are you与How are you被视为相同的字符串。
- c 采用上下文输出格式（提供三行上下文）。
- C n 采用上下文输出格式（提供n行上下文）。
- e 产生一个合法的ed脚本作为输出。
- r 当file1和file2是目录时，递归作用到各文件和目录上。3、比较二进制文件，cmp命令
```

### [#](http://www.liuwq.com/views/linux基础/linux文件比对.html#_3、比较二进制文件，cmp命令)3、比较二进制文件，cmp命令

```shell
用途
比较两个文件的内容并报告不同的第一个字符。
语法
cmp [  -l |  -s ] File1 File2
描述
cmp 命令比较 File1 和 File2 参数指定的文件，并将结果写到标准输出。如果为 File1 或 File2 参数指定 -（减号），
则 cmp 命令读取该文件的标准输入。只可以从标准输入读取一个文件。在缺省条件下，如果文件相同，则 cmp 命令不显示任何内容。
如果它们不同，则 cmp 命令显示发生不同的第一个字节数和行数。如果指定了 -l 标志，
并且如果一个文件是另一文件的初始后继（即，如果在查找任何差别之前，cmp 命令读取文件中的文件结束符），则 cmp 命令记下它。
通常，使用 cmp 命令比较非文本文件，使用 diff 命令比较文本文件。
标志
-l     对于每个不同，（小写字母 L）显示十进制的字节数和八进制的不同字节。
-s     只返回退出值。值 0 指示相同的文件；值 1 指示不同的文件；值 2 指示不可访问的文件或缺少选项。
退出状态

该命令返回以下退出值：
0     文件相同。
1     文件不同。即使一个文件是另一个文件的初始后继（一个文件与另一个文件的第一个部分相同），也给出该值。
>1     发生错误。
示例
```

